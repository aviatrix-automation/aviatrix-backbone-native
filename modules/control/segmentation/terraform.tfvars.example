# ============================================================================
# Segmentation Module - Example Configuration
# ============================================================================
# This file demonstrates all available variables for the segmentation module.
# Copy to terraform.tfvars and customize for your environment.

# ----------------------------------------------------------------------------
# Required Variables
# ----------------------------------------------------------------------------

# AWS region for SSM parameter retrieval (controller credentials)
aws_ssw_region = "us-west-2"

# ----------------------------------------------------------------------------
# Network Domains
# ----------------------------------------------------------------------------

# List of unique domain names for network segmentation
# These domains will be used to logically separate traffic
domains = [
  "prod",
  "non-prod",
  "infra",
  "dmz"
]

# ----------------------------------------------------------------------------
# Connection Policies
# ----------------------------------------------------------------------------

# Define which domains can communicate with each other
# Connections are bidirectional (prod -> infra also allows infra -> prod)
connection_policy = [
  {
    source = "prod"
    target = "infra"
  },
  {
    source = "non-prod"
    target = "infra"
  },
  {
    source = "dmz"
    target = "infra"
  }
]

# ----------------------------------------------------------------------------
# Spoke Cloud Types (Optional)
# ----------------------------------------------------------------------------

# List of cloud types to include for spoke gateway associations
# Default: [8] (Azure only)
# Cloud types:
#   1  = AWS
#   4  = GCP
#   8  = Azure
#   16 = OCI
#   32 = AliCloud
#
# Example: Include AWS, Azure, and GCP spokes
spoke_cloud_types = [1, 8, 4]

# ----------------------------------------------------------------------------
# Manual Transit Associations (Optional)
# ----------------------------------------------------------------------------

# Manual domain associations for transit connections that don't follow
# standard naming conventions. These override auto-inference.
#
# Format: "connection_name~gateway_name" = "domain_name"
#
# Use case: Legacy connections or non-standard naming that can't be
# automatically inferred from the connection name
manual_transit_associations = {
  "legacy-vpn-site1~aws-us-east-1-transit"     = "prod"
  "partner-datacenter~azure-westus2-transit"   = "dmz"
  "backup-connection~gcp-us-central1-transit"  = "infra"
}

# ----------------------------------------------------------------------------
# Manual Spoke Associations (Optional)
# ----------------------------------------------------------------------------

# Manual domain associations for spoke gateways that don't follow
# standard naming conventions. These override auto-inference.
#
# Format: "spoke_name~transit_name" = "domain_name"
#
# Use case: Spoke gateways with non-standard names or when domain
# cannot be inferred from the gateway name
manual_spoke_associations = {
  "aws-legacy-app-spoke~aws-us-east-1-transit"      = "prod"
  "azure-backup-spoke~azure-westus2-transit"        = "non-prod"
  "gcp-shared-services~gcp-us-central1-transit"     = "infra"
}

# ----------------------------------------------------------------------------
# Exclusions (Optional)
# ----------------------------------------------------------------------------

# List of connection names to exclude from auto-association
# Use case: Test connections, temporary tunnels, or connections that
# should not be assigned to any domain
exclude_connections = [
  "external-test-connection",
  "external-temp-vpn",
  "external-sandbox-site2cloud"
]

# List of spoke gateway names to exclude from auto-association
# Use case: Test spokes, development gateways, or temporary infrastructure
exclude_spoke_gateways = [
  "test-spoke-1",
  "dev-experimental-spoke",
  "sandbox-spoke",
  "temp-migration-spoke"
]

# ----------------------------------------------------------------------------
# Advanced Options (Optional)
# ----------------------------------------------------------------------------

# Custom URL for terracurl destroy operations (rarely needs changing)
# destroy_url = "https://checkip.amazonaws.com"
